AzureDevops - June 2023

JSON Basics:
-----------
Why IAC infrastructure as a code?

500 Storage accounts 
Automated way of deployment
Reusable 
Predictable 

DEV:   Aravind left the org
5 Linux VM
2 SQL DB
7 Subnets
2 VNETs
7 NSG
VNET peerings 

Supriya:

TEST

Data types:

String = "Welcome to Azure"
Number = 12
Floating = 15.34
Boolean = True / False

Getting started with ARM Templates:
----------------------------------
Download the VSCode: https://code.visualstudio.com/download
VSCode Extension: Azure Resource Manager (ARM) Tools
				  ARM Template Viewer


Portal
Powershell
AzureCLI

IAC:
ARMTemplates
Terraform 
Bicep

Powershell command to deploy ARMTempaltes:

https://learn.microsoft.com/en-us/azure/azure-resource-manager/templates/deploy-powershell

New-AzResourceGroupDeployment -ResourceGroupName ARMTemplates -TemplateFile .\template.json -TemplateParameterFile .\parameters.json -Verbose

LAB: Add the datadisk to VM
	 https://learn.microsoft.com/en-us/azure/virtual-machines/using-managed-disks-template-deployments

Get the secrets from Keyavult:	 
	 https://learn.microsoft.com/en-us/azure/azure-resource-manager/templates/key-vault-parameter?tabs=azure-cli
	 
Multi Resource Deployment using ARMTemplates:
--------------------------------------------
https://learn.microsoft.com/en-us/azure/azure-resource-manager/templates/parameters

https://learn.microsoft.com/en-us/azure/azure-resource-manager/templates/template-tutorial-create-multiple-instances?tabs=CLI%2Cazure-cli

ARMTemplates functions:

resourcegroup().location


Terraform: IAC 

ARMTemplates											Terraform 
------------											---------
1. IAC Tool 											1. IAC Tool 
2. Specific to Azure 									2. Open source - Azure, AWS, GCP, OCI, datacenter etc 
3. Format - JSON 										3. Format - HCL (Hashicorp configuration language)
4. Extension - .json 									4. Extension - .tf
5. template.json 										5. main.tf
	parameters.json											variables.tf
6. Schema												6. Terraform building blocks:
	contentversion												provider
	parameters													resources 
	variables													outputs
	resources 
	outputs
7. New-AzResourceGroupDeployment						7. Terraform life cycle 
	-ResourceGroupName '' `										Terraform init
	-TemplateFile '' `											Terraform fmt
	-TemplateParameterFile '' `									Terraform validate
	-Verbose													Terraform plan
																Terraform apply 
																Terraform destroy

Getting started with Terraform:
------------------------------
Download terraform - https://developer.hashicorp.com/terraform/downloads
Extract the zip file -> terraform.exe
Copy the terraform.exe file to C:\Windows
to test it -> open the cmd --> type terraform 

Go to vscode -> install extensions: HashiCorp Terraform & Azure Terraform

Terraform providers:
-------------------
Terraform Providers: https://registry.terraform.io/browse/providers

Azure - azurerm
AWS   - aws
GCP   - google

Terraform variables types: https://developer.hashicorp.com/terraform/language/expressions/types


Azure Terraform provider github release notes:
https://github.com/hashicorp/terraform-provider-azurerm/blob/main/CHANGELOG.md